

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API dokumentáció &mdash; openbiomaps 4.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Projekt adminisztráció" href="admin_pages.html" />
    <link rel="prev" title="Adatelérés" href="data_access.html" /> 

</head>

<body>
    <table style='background-color:#eeeeee;padding:10px;margin:0;width:100%'>
    <tr>
        <td rowspan='2' style='vertical-align:bottom'>
            <a href='http://openbiomaps.org' style='border:0'><img src="_images/OpenBioMaps_small.png"></a>
        </td>
        <td style='vertical-align:top;text-align:right'>
            <a href='http://openbiomaps.org' target='_blank'>Kezdőlap</a> | 
            <a href='http://openbiomaps.org/community/' target='_blank'>Közösség</a> | 
            <a href='faq.html'>GYIK</a> | 
            <a href='https://gitlab.com/groups/openbiomaps/-/issues'>Ügyek</a> | 
            <a href='https://twitter.com/OpenBioMaps' target='_blank'>Twitter</a> | 
            <a href="https://github.com/OpenBioMaps/documentation/tree/master/official_docs" class="fa fa-github">Dokumentáció szerkesztése</a>
        </td>
    </tr>
    <tr>
         <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
          <a href="http://openbiomaps.org/documents/en/"><img src="_static/flagicons/en.png" alt="en" title="in English" border="0" /></a>
          <a href="http://openbiomaps.org/documents/hu/"><img src="_static/flagicons/hu.png" alt="hu" title="Magyarul" border="0" /></a>
         </td>
    </tr>
    </table>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="index.html">Docs</a></li>
        
      <li>API dokumentáció</li>
    
    
      <li class="breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Bevezetés</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#openbiomaps-folyamatok">OpenBioMaps folyamatok</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#openbiomaps-konzorcium">OpenBioMaps Konzorcium</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Oktató anyagok</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#felhasznalok-altal-keszitett-szoveges-oktatasi-anyagok">Felhasználók által készített szöveges oktatási anyagok</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#felhasznalok-altal-keszitett-video-oktatasi-anyagok">Felhasználók által készített videó oktatási anyagok</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_interface.html">Felhasználói felületek</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#bejelentkezes">Bejelentkezés</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#profil-lap">Profil lap</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#meghivasok">Meghívások</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#projekt-adminisztracio">Projekt adminisztráció</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#uzenetek">Üzenetek</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#uj-adatbazis-alapitasa">Új adatbázis alapítása</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#terkepi-lap">Térképi lap</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#adat-feltoltes">Adat feltöltés</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#adatbazis-osszefoglalo-oldal">Adatbázis összefoglaló oldal</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#nyito-oldal">Nyitó oldal</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html#hiba-bekuldes">Hiba beküldés</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="profile.html">Profil lap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="profile.html#felhasznaloi-adatok">Felhasználói adatok</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#beallitasok">Beállítások</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#orcid-profil">ORCID profil</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#felhasznaloi-informaciok">Felhasználói információk</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#mas-adatbazisok">Más adatbázisok</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#aktivitas">Aktivitás</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#felfuggesztett-adatfeltoltesek">Felfüggesztett adatfeltöltések</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#eltarolt-lekerdezesek">Eltárolt lekérdezések</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#elmentett-eredmenyek">Elmentett eredmények</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#api-kulcsok">Api kulcsok</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#modulok-egyeni-feluletei">Modulok egyéni felületei</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#velemenyek">Vélemények</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upload_data.html">Adatfeltöltés munkafolyamat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="upload_data.html#adatfeltoltesi-lehetosegek">Adatfeltöltési lehetőségek</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_data.html#adat-exportalas-a-feltoltesi-folyamatbol">Adat exportálás a feltöltési folyamatból</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_data.html#adatfeltoltes-megszakitasa">Adatfeltöltés megszakítása</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_access.html">Adatelérés</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_access.html#adateleresi-lehetosegek">Adatelérési lehetőségek</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_access.html#adathozzaferes-szabalyozasa">Adathozzáférés szabályozása</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API dokumentáció</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-kezelok">API kezelők:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oauth">OAUTH</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pds">PDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#web-api">WEB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#form-data-get-form-data-results-explanations">Form Data (get_form_data results) explanations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#training-explanations-and-examples">Training explanations and examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#peldak">Példák</a></li>
<li class="toctree-l2"><a class="reference internal" href="#altalanos-api-valaszok">Általános API válaszok</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="admin_pages.html">Projekt adminisztráció</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#adatbazis-tablak-es-oszlopok">Adatbázis táblák és oszlopok</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#adat-hozzaferesek">Adat hozzáférések</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#adminisztrativ-hozzaferesek">Adminisztratív hozzáférések</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#csoportok">Csoportok</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#faj-nevek">Faj nevek</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#felfuggesztett-adatfeltoltesek">Felfüggesztett adatfeltöltések</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#feltolto-urlapok">Feltöltő űrlapok</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#fajl-kezelo">Fájl kezelő</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#fuggvenyek">Függvények</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#terkep-beallitasok">Térkép beállítások</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#modulok">Modulok</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#nyelvi-definiciok">Nyelvi definíciók</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#rshinyserver">Rshinyserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#sql-lekerdezes-beallitasok-szoveges-es-terkepi-lekerdezesekhez">SQL lekérdezés beállítások szöveges és térképi lekérdezésekhez</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#szerver-info">Szerver infó</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#szerver-logok">Szerver logok</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#tagok">Tagok</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#hatterfolyamatok-kezelese">Háttérfolyamatok kezelése</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modulok</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules.html#modul-adminisztracio">Modul adminisztráció:</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#modul-leirasok">Modul leírások</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server_install.html">Szerver telepítés lépései</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Gyakran Ismételt Kérdések</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#mi-az-openbiomaps">Mi az OpenBioMaps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#mi-az-openbiomaps-konzorcium">Mi az OpenBioMaps konzorcium?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-lephetek-kapcsolatba-a-konzorciummal">Hogyan léphetek kapcsolatba a konzorciummal?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-tudok-sajat-adatbazist-projektet-kesziteni-alapitani">Hogyan tudok saját adatbázist projektet készíteni/alapítani?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-tudok-adatot-feltolteni">Hogyan tudok adatot feltölteni?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-ferhetek-hozza-az-adatokhoz">Hogyan férhetek hozzá az adatokhoz?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-tudok-regisztralni-egy-openbiomaps-adatbazis-proejektbe">Hogyan tudok regisztrálni egy OpenBioMaps adatbázis proejektbe?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#van-programozhato-felulet-fejlesztoknek">Van programozható felület fejlesztőknek?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#milyen-nyelvek-tamogatottak">Milyen nyelvek támogatottak?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-tudok-hozzajarulni-az-openbiomaps-hoz">Hogyan tudok hozzájárulni az OpenBioMaps-hoz?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#kell-fizetni-valamiert">Kell fizetni valamiért?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hol-es-hogyan-tarolja-az-openbiomaps-az-adatokat">Hol és hogyan tárolja az OpenBioMaps az adatokat?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#van-valamilyen-biztonsagi-mentes-megoldas">Van valamilyen biztonsági mentés megoldás?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#elfelejtettem-a-jelszavamat-most-mi-lesz">Elfelejtettem a jelszavamat, most mi lesz?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#rozsaszin-negyzetek-vannak-a-terkep-helyen">Rózsaszín négyzetek vannak a térkép helyén</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#mi-az-a-rum">Mi az a RUM?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#lehetseges-doi-t-rendelni-az-adatbazisokhoz">Lehetséges DOI-t rendelni az adatbázisokhoz?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hol-talalom-meg-az-openbiomaps-szerverek-listajat">Hol találom meg az OpenBioMaps szerverek listáját?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hogyan-mukodik-az-openbiomaps-mobilalkalmazas">Hogyan működik az OpenBioMaps mobilalkalmazás?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#hol-talalhato-meg-az-openbiomaps-r-csomag">Hol található meg az OpenBioMaps R csomag?</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="api-dokumentacio">
<h1>API dokumentáció<a class="headerlink" href="#api-dokumentacio" title="Permalink to this headline">¶</a></h1>
<p>HTTP metódusok:  GET, POST, PATCH</p>
<p>API eszközök:  Bejelentkezés, Adat letöltés, Adat feltöltés, Beállítás módosítás</p>
<div class="section" id="api-kezelok">
<h2>API kezelők:<a class="headerlink" href="#api-kezelok" title="Permalink to this headline">¶</a></h2>
<p>Authentication handler (oauth):</p>
<p>/oatuh/token.php: Authentication</p>
<p>Authentication based interface (pds):</p>
<p>/projects/<em>API_VERSION</em>/<em>projectname</em>/pds.php: Data retrieval, Data push, Settings update</p>
<p>Non authenticated requests (web):</p>
<p>/projects/<em>projectname</em>/index.php</p>
<div class="section" id="pds-api-verzio">
<h3>PDS API verzió:<a class="headerlink" href="#pds-api-verzio" title="Permalink to this headline">¶</a></h3>
<p>Example: <a class="reference external" href="http://openbiomaps.org/projects/dead_animals/v2.1/pds.php">http://openbiomaps.org/projects/dead_animals/v2.1/pds.php</a>
The default version setting (if the version string missing from the URL) is 1.1., which compatible with the 2.0 and backward compatible with the 1.0.</p>
</div>
</div>
<div class="section" id="oauth">
<h2>OAUTH<a class="headerlink" href="#oauth" title="Permalink to this headline">¶</a></h2>
<p>An oauth2 implementation based on ttps://bshaffer.github.io/oauth2-server-php-docs/. OAUTH used in the web interface and in the PDS as well.</p>
<div class="section" id="valtozok">
<h3>Változók<a class="headerlink" href="#valtozok" title="Permalink to this headline">¶</a></h3>
<p>grant_type:     password
username:       a rergistered email address
password:       password string
scope:          list of requested scope access in the autenticated session
access_token:   a valid access token</p>
<p>html authentication of clients is nesessary
Kliensek: mobil, R, web</p>
</div>
</div>
<div class="section" id="pds">
<h2>PDS<a class="headerlink" href="#pds" title="Permalink to this headline">¶</a></h2>
<p>OBM API felület. Az R és mobil csatlakozási felülete. Az OAUTH-ot használja a bejelentkezések kezelésére.</p>
<div class="section" id="id1">
<h3>Változók<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>scope:      data methods: see below</p>
<p>value:      some scope uses it</p>
<p>header:     (put data) JSON list of table columns’ names</p>
<p>ignore_warning: (put data) ignore upload warnings</p>
<p>form_id:        (put_data) set form id</p>
<p>data:           (put data) JSON array of upload data</p>
</div>
<div class="section" id="get-tipusu-feladatok">
<h3>GET típusú feladatok<a class="headerlink" href="#get-tipusu-feladatok" title="Permalink to this headline">¶</a></h3>
<p>get_project_vars: query general project variables (available for non logined users as well).</p>
<blockquote>
<div><dl class="simple">
<dt>További paraméterek:</dt><dd><p>project [text]: if not set default is the <em>template</em> project</p>
</dd>
</dl>
<p>Visszatérés:</p>
<ul class="simple">
<li><p>project_url [url string]: web address of the project</p></li>
<li><p>project_description [text string]: short description of project</p></li>
<li><p>game [on/off]: game available for android mobile app</p></li>
<li><p>public_mapserv [url string]: url of publicly accessible map service</p></li>
<li><p>rserver_port [numeric]: numeric port number of R-Shiny server, accessible on project_url</p></li>
</ul>
</div></blockquote>
<dl>
<dt>get_project_list: get list and basis info of database projects available on the server.</dt><dd><dl class="simple">
<dt>További paraméterek:</dt><dd><p>only-project [text]: query project parameters only for the selected project, default is to query all accessible projects
accessible [text]: all/<strong>accessible</strong>. If <em>accessible</em> parameter given and its value is “accessible” (default)</p>
<ul class="simple">
<li><p>If user already logined, get list of those projects where user has account and where there are public query/upload interfaces.</p></li>
<li><p>If the user not logined, query public projects only.</p></li>
</ul>
</dd>
</dl>
<p>Visszatérés:</p>
<ul class="simple">
<li><p>project_table [string],</p></li>
<li><p>creation_date [date string],</p></li>
<li><p>Creator [string],</p></li>
<li><p>email [string],</p></li>
<li><p>stage [string] experimental/testing/stable,</p></li>
<li><p>doi [string],</p></li>
<li><p>running_date [date string],</p></li>
<li><p>licence [string],</p></li>
<li><p>rum [string],</p></li>
<li><p>collection_dates [date range string],</p></li>
<li><p>subjects [text],</p></li>
</ul>
</dd>
</dl>
<p>get_form_list:   query the list of available upload forms,</p>
<p>get_form_data:   query the fields of the selected form</p>
<blockquote>
<div><p>További paraméterek: value [numeric] numeric id of a form.</p>
<p>Visszatérés: lásd alább.</p>
</div></blockquote>
<p>get_profile:     get profile data of a selected user</p>
<p>get_data:        get data rows from a selected data table (observation data)</p>
<p>get_specieslist: get species list from a project</p>
<p>get_history:     get history of a selected data row</p>
<p>get_report:      perform a predefined query and get the result</p>
<p>get_tables:      get list of tables in a project</p>
<p>get_trainings:  get list of available trainings/forms</p>
<blockquote>
<div><p>Visszatérés: set of traning titles, ids and descriptions,…</p>
</div></blockquote>
<p>get_training_questions: get list of questions for the selected training</p>
<blockquote>
<div><p>További paraméterek: value [numeric] numeric id of a training.</p>
<p>Visszatérés: set of questions,answers and settings</p>
</div></blockquote>
<p>training_results:   status list of users’ trainings per forms. Status can be -1 (not sent), 0 (not validated yet), 1 (done, ok)</p>
<dl class="simple">
<dt>training_toplist: toplist of trainings. Mean, Max, Count values for each forms.</dt><dd><p>További paraméterek: value [text] summary without names (nonames).</p>
</dd>
<dt>get_mydata_rows: feltöltött adatok json formátumban</dt><dd><p>További paraméterek: value [numeric] limit of array length. If 0, no limit, default is no limit.</p>
</dd>
</dl>
<p>get_attachments: csatolt fájlok leszedése a szerverről egybe tarolva.</p>
</div>
<div class="section" id="post-tipusu-feladatok">
<h3>POST típusú feladatok<a class="headerlink" href="#post-tipusu-feladatok" title="Permalink to this headline">¶</a></h3>
<p>put_data:        send/upload data using a selected form</p>
</div>
<div class="section" id="patch-tipusu-feladatok">
<h3>PATCH típusú feladatok<a class="headerlink" href="#patch-tipusu-feladatok" title="Permalink to this headline">¶</a></h3>
<p><em>set_rules:</em>     update specific settings</p>
</div>
</div>
<div class="section" id="web-api">
<h2>WEB API<a class="headerlink" href="#web-api" title="Permalink to this headline">¶</a></h2>
<p>Van egy web (_GET) api végpont az adatok eléréséhez authentikáció nélkül. Ez a ?query=
Ez az API a text_filter modulokat használja az SQL lekérdezés összerakásához.</p>
<div class="section" id="id2">
<h3>Változók<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>query:          (API végpont)</p>
<p>qtable:         (adat tábla megadása)</p>
<p>report:         (adat lekérés tárolt lekérdzésekből)</p>
<p>output:         (JSON, XML, CSV, … file output; If not set, the output is the web interface)</p>
<p>filename:       (the file name of the output file)</p>
<p>Get list of active (known) OpenBioMaps servers using query api:</p>
<p>curl <a class="reference external" href="http://openbiomaps.org/projects/openbiomaps_network/index.php">http://openbiomaps.org/projects/openbiomaps_network/index.php</a> -G -d ‘query={“available”:”up”}&amp;output=json&amp;filename=’</p>
<p>LQ API end point:</p>
<p>LQ:             (display data from a stored query result)</p>
</div>
</div>
<div class="section" id="form-data-get-form-data-results-explanations">
<h2>Form Data (get_form_data results) explanations<a class="headerlink" href="#form-data-get-form-data-results-explanations" title="Permalink to this headline">¶</a></h2>
<p>Leírás: Opcionális oszlop leírás</p>
<p>Alap érték: Fix value for all observation. It can be controlled with the following options:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘_input’ it works as any other field with sticky flag.</p></li>
<li><p>‘_list’ it works as any other list type field with sticky flag.</p></li>
<li><p>‘_geometry’ it works as geometry type field</p></li>
<li><p>‘_login_name’ this value overriden by the user’s name if logged in or returns as _input</p></li>
<li><p>‘_email’ this value overriden by the user’s email address if logged in or returns as _input</p></li>
<li><p>‘_autocomplete’ alias of input</p></li>
<li><p>‘_boolean’ display as normal boolean list</p></li>
<li><p>‘_attachment’ display as normal attachments field</p></li>
<li><p>‘_datum’ display as normal date field</p></li>
<li><p>‘_none’ not used</p></li>
</ul>
</div></blockquote>
<p>Column: The name of the column in the database</p>
<p>Short_name: Visible name of the column for the users</p>
<p>List: json array for menu items of a select menu. Can be {key:value} or [value,value] format</p>
<p>Control: Data checking commands: custom_check, minmax, spatial, nocheck, NULL</p>
<p>Count: (json array) If the control=’minmax’ this field contains the limit values, e.g 1:100</p>
<p>Type: column’s openbiomaps type:</p>
<blockquote>
<div><ul class="simple">
<li><p>autocomplete (json array)</p></li>
<li><p>boolean (two elements list)</p></li>
<li><p>crings (colour rings - text)</p></li>
<li><p>date (YYYY-MM-DD or other clear format)</p></li>
<li><p>datetime (YYYY-MM-DD HH:mm:ss)</p></li>
<li><p>file_id (file names as id by the server)</p></li>
<li><p>line (WKT geometry string)</p></li>
<li><p>list (json array)</p></li>
<li><p>numeric</p></li>
<li><p>point        (WKT geometry string)</p></li>
<li><p>polygon (wkt geometry string)</p></li>
<li><p>text</p></li>
<li><p>time (HH:mm)</p></li>
<li><p>timetominutes (numeric value between  0 and 1440)</p></li>
<li><p>tinterval idő intervallum (HH:mm - HH:mm)</p></li>
<li><p>wkt (WKT sting)</p></li>
</ul>
</div></blockquote>
<p>Genlist: json array for menu items of an autocomplete menu. Can be  {key:value} or [value,value] format</p>
<p>Obl: 1,2,3 (obligatory, non-obligatory, soft error) Soft error can be handled as non obligatory.</p>
<p>Api_params: json array of control values. Till API v2.0 only ‘sticky’ as an array element.
Above API v2.0:
{“sticky”:”off”,”hidden”:”off”,”readonly”:”off”,”list_elements_as_buttons”:”off”,”once”:”off”}.</p>
<p>Spatial_limit: WKT polygon string of spatial limit. It is used if the Control type is spatial.</p>
<p>List_definition: JSON array of complex list definition</p>
<p>Custom_function: null</p>
<p>permanent_sample_plots:</p>
<dl class="simple">
<dt>API &lt; v.2.1</dt><dd><p>JSON array: [{“id”:”1110”,”name”:”Standard plots”,”geometry”:”POLYGON((16.5625…</p>
</dd>
<dt>API &gt;= v.2.1</dt><dd><p>in “form_header”:{…,”permanent_sample_plots”:[{“id”:”1110”,”name”:”Standard plots”,”geometry”:”POLYGON((16.5625…</p>
</dd>
</dl>
</div>
<div class="section" id="training-explanations-and-examples">
<h2>Training explanations and examples<a class="headerlink" href="#training-explanations-and-examples" title="Permalink to this headline">¶</a></h2>
<p>Példák:</p>
<p>curl -F ‘scope=get_trainings’ -F ‘access_token=9d45…’ -F ‘project=dinpi’ <a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
<dl class="simple">
<dt>Result of a successful call:</dt><dd><p>{“status”:”success”,”data”:[{“id”:”1”,”form_id”:”95”,”html”:”&lt;div&gt;…”,,”task_description”:”&lt;div&gt;…”,”enabled”:”t”,”title”:”Gyakorlás I.”,”qorder”:”1”,”project_table”:”dinpi”},{</p>
</dd>
</dl>
<p>curl -F ‘scope=get_training_questions’ -F ‘access_token=9d45…’ -F ‘project=dinpi’ <a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
<dl>
<dt>Result of a successful call:</dt><dd><p>{“status”:”success”,”data”:[{“qid”:”1”,”training_id”:”1”,”caption”:”…?”,”answers”:”[{“Answer”: “…”,”isRight”: “false” }, ]”,”qtype”:”multiselect”}]}</p>
<p>qtype can be multiselect or singleselect</p>
</dd>
</dl>
<p>curl -F ‘scope=training_results’ -F ‘access_token=9bb4…’ -F ‘project=dinpi’ <a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
<dl>
<dt>Result of a successful call:</dt><dd><p>{“status”:”success”,”data”:”{“95”:1,”96”:0,”97”:-1,”98”:-1}”}</p>
<p>Meaning of values: form-95 done, form-96 done, but not validated yet, form-97,98 not completed yet</p>
</dd>
</dl>
<p>curl -F ‘scope=training_toplist’ -F ‘value=nonames’ -F ‘access_token=5ac3…’ -F ‘project=dinpi’ <a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
<dl class="simple">
<dt>Result of a successful call:</dt><dd><p>{“status”:”success”,”data”:{“95”:{“mean”:”0.50000000000000000000”,”count”:”2”,”max”:”0.7”},”96”:{“mean”:”0.70000000000000000000”,”count”:”1”,”max”:”0.7”},”97”:{“mean”:”0.70000000000000000000”,”count”:”1”,”max”:”0.7”},”98”:{“mean”:null,”count”:”1”,”max”:null}}}</p>
</dd>
</dl>
<p>curl -F ‘scope=training_toplist’ -F ‘access_token=5ac3…’ -F ‘project=dinpi’ <a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="nt">&quot;data&quot;</span><span class="p">:{</span>
 <span class="nt">&quot;95&quot;</span><span class="p">:{</span><span class="nt">&quot;Bán Miki&quot;</span><span class="p">:{</span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="s2">&quot;0.30000000000000000000&quot;</span><span class="p">,</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="s2">&quot;0.3&quot;</span><span class="p">},</span>
       <span class="nt">&quot;Dr. Bán Miklós&quot;</span><span class="p">:{</span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="s2">&quot;0.70000000000000000000&quot;</span><span class="p">,</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="s2">&quot;0.7&quot;</span><span class="p">}</span>
      <span class="p">},</span>
 <span class="nt">&quot;96&quot;</span><span class="p">:{</span><span class="nt">&quot;Dr. Bán Miklós&quot;</span><span class="p">:{</span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="s2">&quot;0.70000000000000000000&quot;</span><span class="p">,</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="s2">&quot;0.7&quot;</span><span class="p">}},</span>
 <span class="nt">&quot;97&quot;</span><span class="p">:{</span><span class="nt">&quot;Dr. Bán Miklós&quot;</span><span class="p">:{</span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="s2">&quot;0.70000000000000000000&quot;</span><span class="p">,</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="s2">&quot;0.7&quot;</span><span class="p">}},</span>
 <span class="nt">&quot;98&quot;</span><span class="p">:{</span><span class="nt">&quot;Dr. Bán Miklós&quot;</span><span class="p">:{</span><span class="nt">&quot;mean&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="nt">&quot;max&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">}}}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="peldak">
<h2>Példák<a class="headerlink" href="#peldak" title="Permalink to this headline">¶</a></h2>
<p>Authentication:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-u mobile:mobile http://openbiomaps.org/oauth/token.php <span class="se">\</span>
-d <span class="s2">&quot;grant_type=password&amp;username=foo@foobar.hu&amp;password=abc123&amp;scope=get_form_data+get_form_list+put_data&quot;</span>
</pre></div>
</div>
<p>Data retrieval (form list):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-v http://openbiomaps.org/projects/checkitout/pds.php <span class="se">\</span>
-d <span class="s2">&quot;access_token=d4fba6585303bba8da3e6afc1eb9d2399499ef3e&amp;scope=get_form_list&quot;</span>
</pre></div>
</div>
<dl class="simple">
<dt>Result of a successful get_form_list call:</dt><dd><p>{“status”:”success”,”data”:[{“form_id”:”93”,”form_name”:”lepke űrlap”},{ …</p>
</dd>
</dl>
<p>Data retrieval (form fields):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-v http://openbiomaps.org/projects/checkitout/pds.php <span class="se">\</span>
-d <span class="s2">&quot;access_token=d4fba6585303bba8da3e6afc1eb9d2399499ef3e&amp;scope=get_form_data&amp;value=93&quot;</span>
</pre></div>
</div>
<p>OR with central pds</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-F <span class="s1">&#39;scope=get_form_data&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;value=93&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;project=checkitout&#39;</span> <span class="se">\</span>
http://openbiomaps.org/projects/checkitout/pds.php
</pre></div>
</div>
<p>OR with access token to retrieve data of a restricted form</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-F <span class="s1">&#39;access_token=...&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;scope=get_form_data&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;value=124&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;project=checkitout&#39;</span> <span class="se">\</span>
http://openbiomaps.org/projects/checkitout/pds.php
</pre></div>
</div>
<p>Csatolmányok letöltése szűréssel:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-F <span class="s1">&#39;access_token=...&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;scope=get_attachments&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;project=sablon&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;value=filter=gyujto!=Fakenuba Furamuki&#39;</span> <span class="se">\</span>
http://localhost/biomaps/resources/pds.php -OJ
</pre></div>
</div>
<p>Csatolmányok letöltése limit-offset megadással (az első sortól 20 sor):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-F <span class="s1">&#39;access_token=...&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;scope=get_attachments&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;project=sablon&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;value=limit=20:0&#39;</span> <span class="se">\</span>
http://localhost/biomaps/resources/pds.php -OJ
</pre></div>
</div>
<p>Csatolmányok letöltése limit-offset megadással és több szűréssel:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl <span class="se">\</span>
-F <span class="s1">&#39;access_token=...&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;scope=get_attachments&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;project=sablon&#39;</span> <span class="se">\</span>
-F <span class="s1">&#39;value=filter=gyujto=Fakenuba Furamuki&amp;limit=1000:0&amp;filter=tema=novenyek&#39;</span> <span class="se">\</span>
http://localhost/biomaps/resources/pds.php -OJ
</pre></div>
</div>
<p>Result of a successful get_form_data call:</p>
<p>API &lt; v.2.1</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{&quot;status&quot;:&quot;success&quot;,
 &quot;data&quot;:[
 {&quot;description&quot;:null,
  &quot;default_value&quot;:null,
  &quot;column&quot;:&quot;egyedszam&quot;,
  &quot;short_name&quot;:&quot;egyedszam&quot;,
  &quot;list&quot;:&quot;&quot;,
  &quot;control&quot;:&quot;minmax&quot;,
  &quot;count&quot;:&quot;{30,40}&quot;,
  &quot;type&quot;:&quot;numeric&quot;,
  &quot;genlist&quot;:null,
  &quot;obl&quot;:&quot;3&quot;,
  &quot;api_params&quot;:null},
 {&quot;description&quot;:&quot;faj neve&quot;,
  &quot;default_value&quot;:null,
  &quot;column&quot;:&quot;faj&quot;,
  &quot;short_name&quot;:&quot;faj&quot;,
  &quot;list&quot;:&quot;&quot;,
  &quot;control&quot;:&quot;nocheck&quot;,
  &quot;count&quot;:&quot;{}&quot;,
  &quot;type&quot;:&quot;text&quot;,
  &quot;genlist&quot;:null,
  &quot;obl&quot;:&quot;1&quot;,
  &quot;api_params&quot;:null
  },
  {...}]
}
</pre></div>
</div>
<p>API &gt;= v.2.1</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
 &quot;status&quot;:&quot;success&quot;,
 &quot;data&quot;:[
 &quot;form_header&quot;:{&quot;login_name&quot;:&quot;John Smith&quot;,&quot;login_email&quot;:&quot;jsmith@openbiomaps.org&quot;},
 &quot;form_data&quot;:[
      {&quot;description&quot;:&quot;faj neve&quot;,
       &quot;default_value&quot;:null,
       &quot;column&quot;:&quot;faj&quot;,
       &quot;short_name&quot;:&quot;faj&quot;,
       &quot;list&quot;:&quot;&quot;,
       &quot;control&quot;:&quot;nocheck&quot;,
       &quot;count&quot;:&quot;{}&quot;,
       &quot;type&quot;:&quot;text&quot;,
       &quot;genlist&quot;:null,
       &quot;obl&quot;:&quot;1&quot;,
       &quot;api_params&quot;:{&quot;sticky&quot;:&quot;off&quot;,
                     &quot;numeric&quot;:&quot;off&quot;,
                     &quot;list_elements_as_buttons&quot;:&quot;off&quot;}
      },
      {...}]]
}
</pre></div>
</div>
<dl class="simple">
<dt>Adatfeltöltés:</dt><dd><p>curl \ <br>
-i \ <br>
-X POST \ <br>
-H “Content-Type:application/x-www-form-urlencoded” \ <br>
-H “Authorization:Bearer …” \ <br>
-d “scope=put_data” \ <br>
-d “form_id=128” \ <br>
-d “header=[“obm_geometry”,”obm_datum”,”time”,”datum”,”comment”,”longitude”,”latitude”,”observer”]” \ <br>
-d “data=[{“obm_geometr     y”:”point(48.071187 19.293714)”,”obm_datum”:”2018-04-03 23:05”,”time”:”12”,”datum”:”2018-04-03”,”comment”:”asdad”,”longitude”:”0”,”latitude”:”0”,”observer”:”sdsaada”}]” \ <br>
-d “ignore_warning=1” \ <br>
‘<a class="reference external" href="http://openbiomaps.org/projects/checkitout/pds.php">http://openbiomaps.org/projects/checkitout/pds.php</a>’</p>
</dd>
<dt>Adat feltöltés több csatolmánnyal (fájlok):</dt><dd><p>curl \ <br>
-F “access_token=…” \ <br>
-F ‘scope=put_data’ \ <br>
-F ‘form_id=58’ \ <br>
-F ‘header=[“faj”,”obm_geometry”,”obm_files_id”]’ \ <br>
-F ‘batch=[\ <br>
{“data”:[{“faj”:”Sylvia curruca”,”obm_geometry”:”POINT(22.0 46.3)”}],”attached_files”:”file1,file2”},\ <br>
{“data”:[{“faj”:”Lanius Collurio”,”obm_geometry”:”POINT(21.5 47.1)”}],”attached_files”:”file3”}]’ \ <br>
-F <a class="reference external" href="mailto:'file1=&#37;&#52;&#48;file1">‘file1=<span>&#64;</span>file1</a>’ \ <br>
-F <a class="reference external" href="mailto:'file2=&#37;&#52;&#48;file2">‘file2=<span>&#64;</span>file2</a>’ \ <br>
-F <a class="reference external" href="mailto:'file3=&#37;&#52;&#48;file3">‘file3=<span>&#64;</span>file3</a>’ \ <br>
<a class="reference external" href="http://localhost/biomaps/projects/template/pds.php">http://localhost/biomaps/projects/template/pds.php</a></p>
</dd>
<dt>Packed data upload. Data line in ZIP archive. This is the old mobile app’s export format. The ZIP file contains the following files: <br></dt><dd><p>geometry.wkt <br>
PICT01.JPG <br>
PICT02.JPG <br>
note.txt <br></p>
</dd>
</dl>
<p>The ZIP file name is ‘Sun May 13 08:52:51 CEST 2018.zip’ which created from the observation date-time sting. The note.txt contains the observation comment which can be associated with one column of the form. In this example it is the ‘faj’. The other 3 columns shouldn’t be replaced or neglected. If there are some obligatory column in the form, those can be filled by the default_value parameter. In this example the ‘egyedszam’ column is an obligatory field which will be filled with ‘1’. Packed lines can be super packed. In this case ‘packed_line’ parameter should be changed to ‘multipacked_lines’ and the zip archive should contains zip files detailed above.</p>
<blockquote>
<div><p>curl \ <br>
-F ‘scope=put_data’ \ <br>
-F ‘table=dinpi’ \ <br>
-F ‘form_id=58’ \ <br>
-F ‘header=[“obm_geometry”,”obm_files_id”,”faj”,”dt_to”]’ \ <br>
-F ‘default_values={“egyedszam”:”1”}’ \ <br>
-F <a class="reference external" href="mailto:'packed_line=&#37;&#52;&#48;Sun">‘packed_line=<span>&#64;</span>Sun</a> May 13 08:52:51 CEST 2018.zip’ \ <br>
<a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
</div></blockquote>
<dl>
<dt>Data retrieval (non-authenticated report):</dt><dd><p>wget <a class="reference external" href="http://localhost/biomaps/projects/dinpi/?report=2&#64;szamossag&amp;output=csv">http://localhost/biomaps/projects/dinpi/?report=2&#64;szamossag&amp;output=csv</a></p>
</dd>
<dt>Refresh token (from R):</dt><dd><p>curl \ <br>
-F ‘grant_type=refresh_token’ \ <br>
-F ‘refresh_token=…’ \ <br>
-F ‘client_id=R’ \ <br>
<a class="reference external" href="http://openbiomaps.org/oauth/token.php">http://openbiomaps.org/oauth/token.php</a></p>
<p>Returns: <br>
{“access_token”:”…”, <br>
“expires_in”:3600, <br>
“token_type”:”Bearer”, <br>
“scope”:”get_form_data …”, <br>
“refresh_token”:”…”}</p>
</dd>
<dt>Project list (using central pds):</dt><dd><p>curl \ <br>
-F ‘scope=get_project_list’ \ <br>
<a class="reference external" href="http://localhost/biomaps/pds.php">http://localhost/biomaps/pds.php</a></p>
<p>Returns: <br>
JSON array of those project which has public upload forms, or the user (if logined) member of it.</p>
</dd>
</dl>
</div>
<div class="section" id="altalanos-api-valaszok">
<h2>Általános API válaszok<a class="headerlink" href="#altalanos-api-valaszok" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference external" href="https://labs.omniti.com/labs/jsend">https://labs.omniti.com/labs/jsend</a> ajánlást követve:</p>
<dl class="simple">
<dt>JSON:</dt><dd><p>{“status”:”X”,”data”:”“,”message”:”“}</p>
</dd>
</dl>
<p>X: success, error, fail</p>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright OpenBioMaps Konzorcium 2015 - 2021.
        Last updated on Feb 12, 2023.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.0+.
        </div>
    </div>  

</body>
</html>