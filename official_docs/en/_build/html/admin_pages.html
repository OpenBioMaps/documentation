

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Administrative pages &mdash; openbiomaps 4.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Modules" href="modules.html" />
    <link rel="prev" title="Invitations" href="invitations.html" /> 

</head>

<body>
    <table style='background-color:#eeeeee;padding:10px;margin:0;width:100%'>
    <tr>
        <td rowspan='2' style='vertical-align:bottom'>
            <a href='https://openbiomaps.org' style='border:0'><img src="_images/OpenBioMaps_small.png"></a>
        </td>
        <td style='vertical-align:top;text-align:right'>
            <a href='https://openbiomaps.org' target='_blank'>Home</a> | 
            <a href='https://openbiomaps.org/community/' target='_blank'>Community</a> | 
            <a href='faq.html'>FAQ</a> | 
            <a href='https://gitlab.com/groups/openbiomaps/-/issues'>Issues</a> | 
            <a href='https://twitter.com/OpenBioMaps' target='_blank'>Twitter</a> | 
            <a href="https://github.com/OpenBioMaps/documentation/tree/master/official_docs" class="fa fa-github">Edit documents</a>
        </td>
    </tr>
    <tr>
         <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
          <a href="https://openbiomaps.org/documents/en/"><img src="_static/flagicons/en.png" alt="en" title="in English" border="0" /></a>
          <a href="https://openbiomaps.org/documents/hu/"><img src="_static/flagicons/hu.png" alt="hu" title="Magyarul" border="0" /></a>
         </td>
    </tr>
    </table>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="index.html">Docs</a></li>
        
          <li><a href="using_web_application.html">Using the web application</a></li>
        
          <li><a href="user_interface.html">User interfaces</a></li>
        
      <li>Administrative pages</li>
    
    
      <li class="breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#openbiomaps-overview">OpenBioMaps overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#getting-started">Getting started</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#upload-data">Upload data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#query-data">Query Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#share-data">Share Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#new-project">New project</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#data-access-using-qgis">Data access using QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#new-server-installation">New server Installation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="using_web_application.html">Using the web application</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="user_interface.html">User interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html">Profile page</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_data.html">Upload data workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_access.html">Data access</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Administrative pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#api-handlers">API handlers:</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#oauth">OAUTH</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#pds">PDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#web-api">WEB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#form-data-get-form-data-results-explanations">Form Data (get_form_data results) explanations</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#training-explanations-and-examples">Training explanations and examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#general-api-answers">General API answers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server_install.html">Install new OBM Server guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#new-obm-server-installation-using-docker">New OBM server installation using Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#common-errors-and-solutions-after-new-installations-or-updates">Common errors and solutions after new installations or updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#server-configuration">Server configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#local-variables-for-a-project">Local variables for a project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pwa.html">PWA application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pwa.html#what-is-the-obm-pwa-application">What is the OBM PWA application?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwa.html#configuration-settings-for-pwa-application">Configuration settings for PWA application</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwa.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mobile_application.html">Mobile application documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mobile_application.html#how-the-mobile-application-works">How the mobile application works?</a></li>
<li class="toctree-l2"><a class="reference internal" href="mobile_application.html#mobile-application-settings-on-the-server">Mobile application settings on the server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer_hints.html">Developer hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-openbiomaps">What is OpenBioMaps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-openbiomaps-consortium">What is OpenBioMaps consortium?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-contact-the-consortium">How can I contact the consortium?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-create-found-a-new-database-project">How can I create/found a new database-project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-upload-data">How can I upload data?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-access-data">How can I access data?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-sign-up-for-an-openbiomaps-project">How can I sign up for an OpenBioMaps project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-there-a-programmable-interface-for-developers">Is there a programmable interface for developers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-language-support-is-available">What language support is available?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-contribute-to-openbiomaps">How can I contribute to OpenBioMaps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#shoud-i-pay-for-anything">Shoud I pay for anything?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-and-where-the-openbiomaps-stores-the-data">How and where the OpenBioMaps stores the data?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-there-any-backup-solution">Is there any backup solution?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-lost-my-password-how-can-i-get-a-new">I lost my password, how can I get a new?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#pink-squares-appear-on-the-map-page">Pink squares appear on the map page</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-the-rum">What is the RUM?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-it-possible-to-assign-a-doi-to-databases">Is it possible to assign a DOI to databases?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#where-can-i-find-the-list-of-the-existing-openbiomaps-servers">Where can I find the list of the existing OpenBioMaps servers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-does-the-openbiomaps-mobile-app-work">How does the OpenBioMaps mobile app work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#where-can-i-found-the-openbiomaps-r-package">Where can I found the OpenBioMaps R package?</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="administrative-pages">
<span id="project-administration"></span><h1>Administrative pages<a class="headerlink" href="#administrative-pages" title="Permalink to this headline">¶</a></h1>
<div class="section" id="administrative-access">
<h2>Administrative access<a class="headerlink" href="#administrative-access" title="Permalink to this headline">¶</a></h2>
<p>Administrative functions can be delegated to user groups.</p>
</div>
<div class="section" id="database-tables-and-columns">
<span id="database-columns"></span><h2>Database tables and columns<a class="headerlink" href="#database-tables-and-columns" title="Permalink to this headline">¶</a></h2>
<p>[web] -&gt; [profile] -&gt; [project administration] -&gt; [database table management]</p>
<p>We can create a SQL table that OBM registers to our project and creates the default OBM columns in it. The table name should not contain accented characters, spaces or other special characters! Avoid using capital letters! The _ character is allowed. It is strongly recommended that a description of arbitrary length be provided for the table.</p>
<p>Only tables registered here can be used in the OBM interface (map display, form use, text queries)!</p>
<p>Here, you can set which columns from each table should be available for form creation and queries in the web interface.</p>
<p>Also, here you can specify the columns to be specially handled. This means that columns that are used by certain modules without knowing the exact name of the column or on the same basis are available in meta queries. Such privileged columns are the species name, date, data collector, copy number and location columns. For the location column, the X,Y coordinate column and the Postgres geometry column can be specified separately. For date, multiple date columns can be specified, for data collector, multiple columns can be specified. For species name, the column containing the scientific name and national name can be specified separately if available. All other columns must be set to “data” type.</p>
<blockquote>
<div><ul class="simple">
<li><p>data: for general purpose columns</p></li>
<li><p>spatial geometry: this column can be used for map creation</p></li>
<li><p>scientific species name: this column can be used in taxon management</p></li>
<li><p>alternative names: this column can be used in taxon management</p></li>
<li><p>date this column can be used in date filters</p></li>
<li><p>no. of individuals: can be used in summary functions</p></li>
<li><p>latitude: together with longitude can be used for creating spatial geometry</p></li>
<li><p>longitude: together with latitude can be used for creating spatial geometry</p></li>
<li><p>citing: used in summary functions</p></li>
<li><p>attachment: file attachments column</p></li>
<li><p>UTM Zone: used in spatial geometry creation</p></li>
</ul>
</div></blockquote>
<p>The ‘comment field’ should contain descriptions of the content of the columns (metadata) and may also have a regulatory role in some cases. In the case of the obm_geometry column, the comment field can be used to specify the geometry column’s srid, which will define the stored srid of the uploaded data. The value entered must be in the format <cite>srid:4326</cite> and will be stored in biomaps/header_names/f_srid and used by the application in the global variable SRID_C.</p>
<p>For the obm_id column, you can specify whether the rules table should be used as follows: use_rules:1 This can only be modified with master access.</p>
<p>In both cases, the SET prefix is automatically added in the comment field and must be cleared in order to validate the change. This is done to prevent accidental modification of these parameters.</p>
<p>An SQL console is available at the top of the page, which can only be used with operator status and after separate authentication.</p>
<p>Also available here is a drop-down list of all the tables that start with the name of our project in the SQL database. Of these, the ones marked in red are not handled by the OBM interface because they are not registered as tables accessible to OBM.</p>
<p>Views management is mainly used to serve a specific function, namely to replace one of our data tables with a View. In such a case, the system creates a Schema for our project with the same name as the base table and moves our original tables there, for which it also creates the corresponding INSERT/UPDATE/DELETE Rules. This feature can be useful when we have a large data table and there are some flows or triggers that are too slow to use, or we want to create custom versions of our data table to meet some specific user needs.</p>
</div>
<div class="section" id="groups">
<h2>Groups<a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h2>
<p>Creating and managing groups. These groups can be used for the management of access and usage control of upload forms, data, modules, and administrative functions.
The groups can contain groups.</p>
</div>
<div class="section" id="upload-forms">
<h2>Upload forms<a class="headerlink" href="#upload-forms" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="upload_forms.html"><span class="doc">Upload form management</span></a></p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>Some pre-built triggers can be turned on and off here, and the associated functions can be edited.</p>
<p>You can also view the status of all triggers and SQL Rules associated with the selected table.</p>
<dl class="simple">
<dt>Built-in triggers:</dt><dd><ul class="simple">
<li><p>Taxon list auto update: Add ‘scientific name’ and ‘alternative names’ to the taxon table which is used by the taxon filter,</p></li>
<li><p>Taxon name auto update: updates the data table on taxon table updating,</p></li>
<li><p>History: create history lines in the “history table” after updating and delete rows,</p></li>
<li><p>Access rules: create a rule line in the “rules table” after inserting a new row. The rules applied are from the form settings.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="species-names">
<h2>Species names<a class="headerlink" href="#species-names" title="Permalink to this headline">¶</a></h2>
<p>Taxon table management interface.</p>
<p>Assign species names to the following categories: [accepted name], [synonym name], [common name], [mispelled name].</p>
<p>The species names in the taxon table (species name database) are used by the “taxon-name-repair-background-jobs” and the search interfaces.</p>
</div>
<div class="section" id="access">
<span id="data-access"></span><h2>Access<a class="headerlink" href="#access" title="Permalink to this headline">¶</a></h2>
<p>Overview of set access rules and their work statuses.</p>
<p>[web] -&gt; [profile] -&gt; [project administration] -&gt; [data access]</p>
<p>[system] -&gt; [/web-app-path/] -&gt; [/projects/YOURPROJECT/local_vars.php.inc]</p>
<p>View the general access setting of the project per data table. This is not configurable here!</p>
</div>
<div class="section" id="translations">
<h2>Translations<a class="headerlink" href="#translations" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Global translations: global translations can be added and improved in our public translator platform: <a class="reference external" href="https://translate.openbiomaps.org">https://translate.openbiomaps.org</a>.</dt><dd><p>You can also start a new language on this interface, and translations of the mobile app and other openbiomaps components can be found here.
Feel free to create, add and improve translations!</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Local translations:</dt><dd><p>Use the ‘<a href="#id3"><span class="problematic" id="id4">str_</span></a>’ prefix, followed by some pretty understandable English expressions. Eg: str_observations, the translation of which must be given in the given active language. In this case, observation.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>See local translations in action here:</dt><dd><p><a class="reference external" href="https://openbiomaps.org/projects/checkitout/upload/?form=426&amp;type=web">https://openbiomaps.org/projects/checkitout/upload/?form=426&amp;type=web</a></p>
</dd>
</dl>
</div>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="modules.html"><span class="doc">modules</span></a>.</p>
</div>
<div class="section" id="interrupted-uploads">
<h2>Interrupted uploads<a class="headerlink" href="#interrupted-uploads" title="Permalink to this headline">¶</a></h2>
<p>Users’ saved and unfinished file or form data uploads can be found here. Once uploaded, they can be resumed or discarded. Most of these interrupted uploads can be deleted!</p>
</div>
<div class="section" id="file-manager">
<h2>File manager<a class="headerlink" href="#file-manager" title="Permalink to this headline">¶</a></h2>
<p>List of uploaded attachments. Attachments can be managed here. There is a possibility to export all attachments belonging to a data table into one compressed file using the export functionality. Exporting can take a long time due to it using a “Background-Job”. When it is ready a link will appear next to the export button to access the produced file.</p>
</div>
<div class="section" id="sql-query-settings">
<h2>SQL query settings<a class="headerlink" href="#sql-query-settings" title="Permalink to this headline">¶</a></h2>
<p>Here you can configure the SQL queries that Mapserver will use to display the map data and the web application will use to display the text results of the queries.
These are mostly not real SQL commands, but templates for SQL query assembly with approximate SQL syntax.</p>
<p>In the Mapserver/map file, WMS layers must contain a DATA definition line with a %query% substitution string to use a dynamically generated SQL command based on the SQL template defined here.</p>
<p>All SQL queries should be connected with one web map layer. In the last column, you can set these connections. In the SQL queries, there are two substitute variables to perform dynamic queries: %qstr% and %morefilters%.</p>
<p>The query may contain magic words. These are delimited by % characters. These will be dynamically replaced by real SQL strings in the OBM SQL interpreter.
Some modules may also generate such magic words!</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">obm_id</span><span class="p">,</span> <span class="o">%</span><span class="n">grid_geometry</span><span class="o">%</span> <span class="k">AS</span> <span class="n">obm_geometry</span>
    <span class="o">%</span><span class="n">selected</span><span class="o">%</span>
<span class="k">FROM</span> <span class="o">%</span><span class="n">F</span><span class="o">%</span><span class="n">checkitout</span> <span class="k">c</span><span class="o">%</span><span class="n">F</span><span class="o">%</span>
    <span class="o">%</span><span class="n">uploading_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">rules_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">taxon_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">grid_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">search_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">morefilter</span><span class="o">%</span>
<span class="k">WHERE</span> <span class="o">%</span><span class="n">geometry_type</span><span class="o">%</span> <span class="o">%</span><span class="n">envelope</span><span class="o">%</span> <span class="o">%</span><span class="n">qstr</span><span class="o">%</span>
</pre></div>
</div>
<p>Use %F% and an alias name around the FROM table. It is necessary to split the query template.</p>
<p>If you want to join another table use the %J% around the JOIN statement. E.g.</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">n</span><span class="p">.</span><span class="n">obm_geometry</span><span class="p">,</span><span class="n">n</span><span class="p">.</span><span class="n">obm_id</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span> <span class="k">AS</span> <span class="n">date_part</span><span class="p">,</span><span class="n">nestbox_type</span><span class="p">,</span><span class="n">project_id</span><span class="p">,</span><span class="n">beinaction</span>
    <span class="o">%</span><span class="n">selected</span><span class="o">%</span>
<span class="k">FROM</span> <span class="o">%</span><span class="n">F</span><span class="o">%</span><span class="n">public_nestbox_data</span> <span class="n">n</span><span class="o">%</span><span class="n">F</span><span class="o">%</span>
    <span class="o">%</span><span class="n">J</span><span class="o">%</span><span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">public_nestbox_data_observations</span> <span class="n">o</span> <span class="k">ON</span> <span class="n">o</span><span class="p">.</span><span class="n">nestbox_id</span><span class="o">=</span><span class="n">n</span><span class="p">.</span><span class="n">obm_id</span><span class="o">%</span><span class="n">J</span><span class="o">%</span>
    <span class="o">%</span><span class="n">taxon_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">morefilter</span><span class="o">%</span>
<span class="k">WHERE</span> <span class="o">%</span><span class="n">envelope</span><span class="o">%</span> <span class="o">%</span><span class="n">qstr</span><span class="o">%</span>
</pre></div>
</div>
<p>Building more complex queries is possible:</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">WITH</span> <span class="n">aall</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">o</span><span class="p">.</span><span class="n">obm_id</span><span class="p">,</span><span class="n">n</span><span class="p">.</span><span class="n">obm_geometry</span><span class="p">,</span><span class="n">nestbox_type</span><span class="p">,</span><span class="n">project_id</span><span class="p">,</span><span class="n">beinaction</span><span class="p">,</span>
    <span class="n">COALESCE</span><span class="p">(</span><span class="k">extract</span><span class="p">(</span><span class="n">days</span> <span class="k">FROM</span> <span class="p">(</span><span class="k">CURRENT_DATE</span><span class="o">-</span><span class="n">datum</span><span class="p">)::</span><span class="nb">interval</span><span class="p">),</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="k">as</span>  <span class="n">date_part</span>
        <span class="o">%</span><span class="n">selected</span><span class="o">%</span>
    <span class="k">FROM</span> <span class="o">%</span><span class="n">F</span><span class="o">%</span><span class="n">public_nestbox_data_observations</span> <span class="n">o</span><span class="o">%</span><span class="n">F</span><span class="o">%</span>
    <span class="o">%</span><span class="n">J</span><span class="o">%</span><span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">public_nestbox_data</span> <span class="n">n</span> <span class="k">ON</span> <span class="p">(</span><span class="n">nestbox_id</span><span class="o">=</span><span class="n">n</span><span class="p">.</span><span class="n">obm_id</span><span class="p">)</span> <span class="o">%</span><span class="n">J</span><span class="o">%</span>
    <span class="o">%</span><span class="n">taxon_join</span><span class="o">%</span>
    <span class="o">%</span><span class="n">morefilter</span><span class="o">%</span>
    <span class="k">WHERE</span> <span class="mi">1</span><span class="o">=</span><span class="mi">1</span> <span class="o">%</span><span class="n">envelope</span><span class="o">%</span> <span class="o">%</span><span class="n">qstr</span><span class="o">%</span>
<span class="p">)</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">aall</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">date_part</span> <span class="k">DESC</span>
</pre></div>
</div>
</div>
<div class="section" id="map-settings">
<span id="id1"></span><h2>Map settings<a class="headerlink" href="#map-settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="web-map-layers">
<h3>Web Map Layers<a class="headerlink" href="#web-map-layers" title="Permalink to this headline">¶</a></h3>
<p>OpenLayer settings for web-map interface</p>
</div>
<div class="section" id="mapserver-settings">
<h3>Mapserver settings<a class="headerlink" href="#mapserver-settings" title="Permalink to this headline">¶</a></h3>
<p>Raw version of mapfile.  See the mapserver documentation for updating this file.</p>
</div>
</div>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<p>List of members registered in the project. You can change your user status here. These are Normal, Operator, Suspended. Suspended users do not have access to anything in the project, almost equivalent to deleting a profile.
Operators have access to all features and data. The database founder does not have to be an operator to have access to everything. Normal users will by default have access to data upload and data query options according to the project’s privilege setting. This default can be modified by creating groups and assigning different permissions to groups. See <span class="xref std std-ref">Groups</span> and <span class="xref std std-ref">Administrative access</span>.</p>
<p>Members’ group assignments can also be modified here, but a more convenient interface is Group Manager.</p>
<p>The member name is a reference in this interface. Following this link will take you to the user’s profile page. With administrative privileges, a tree-user-secret icon (<a class="reference external" href="https://forkaweso.me/Fork-Awesome/icon/user-secret/">https://forkaweso.me/Fork-Awesome/icon/user-secret/</a>) will appear in the tab title bar - top right. Clicking on this will take you to another user’s profile using your own user login details.</p>
</div>
<div class="section" id="message-templates">
<h2>Message templates<a class="headerlink" href="#message-templates" title="Permalink to this headline">¶</a></h2>
<p>The messages sent by the system or project must have a template. Global templates are provided for the implemented cases. Please find a list of global templates with short description.</p>
<p>On this page, global templates can be overridden by their local version, by selecting
a template -&gt; editing -&gt; and saving it. The templates can have variables that
are substituted with the provided strings, at the moment of sending the message.
For each template, these variables are defined in the code.</p>
<p>Variables are marked with %var%. A few global variables are defined, which can
be used anywhere in the template.</p>
<p>Including other templates are supported. For example, if you define a footer for
your project, this can be included by appending the &#64;footer&#64; string to the end
of the template.</p>
<p>New templates for custom modules or jobs can also be defined here.</p>
<div class="section" id="global-variables">
<h3>Global variables<a class="headerlink" href="#global-variables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><cite>%PROJECT_TABLE%</cite> - the name of the project</p></li>
<li><p><cite>%PROJECT_TITLE%</cite> - the short description of the project</p></li>
<li><p><cite>%PROJECT_DESCRIPTION%</cite> - the long description of the project</p></li>
<li><p><cite>%USER_NAME%</cite> - the name of the user</p></li>
<li><p><cite>%URL%</cite></p></li>
<li><p><cite>%OB_DOMAIN%</cite></p></li>
<li><p><cite>%DOMAIN%</cite> - the domain name defined in the “projects” table</p></li>
<li><p><cite>%PROTOCOL%</cite> - the protocol defined in the “projects” table</p></li>
</ul>
</div>
<div class="section" id="predefined-templates">
<h3>Predefined templates<a class="headerlink" href="#predefined-templates" title="Permalink to this headline">¶</a></h3>
<p>User-related messages:
* <cite>welcome_to</cite> - welcome to the project
* <cite>change_email_address</cite> - a confirmation link, for changing the user’s email address
* <cite>dropmyaccount</cite> - Confirmation email of dropping the account
* <cite>create_new_project</cite> - confirmation message of creating a new project
* <cite>invitation</cite> - invitation email
* <cite>invitation_accomplished</cite> - notification about the accomplished invitation
* <cite>invitation_request</cite> - message to admins about the invitation request
* <cite>lostpw</cite> - lost password</p>
<p>Miscellaneous:
* <cite>new_gitlab_issue</cite> - a copy of a submitted bug report
* <cite>new_shared_polygon</cite> - Project or system news about a new shared polygon
* <cite>new_upload_news</cite> - Project news about a new upload
* <cite>new_upload_report</cite> - Notification for the admins about a new upload
* <cite>footer</cite> - A general mail footer
* <cite>interconnect_request</cite> -</p>
<p>Evaluation notifications:
* <cite>data_evaluation_commenters</cite> - This message is sent when a record, previously commented by the user, gets a new comment.
* <cite>data_evaluation_owner</cite> - This message is sent to the owner if a record uploaded by him gets a comment.
* <cite>upload_evaluation_commenters</cite> - This message is sent when an upload, previously commented by the user, gets a new comment.
* <cite>upload_evaluation_owner</cite> - This message is sent when an upload of the user gets a comment.
* <cite>user_evaluation_commenters</cite> - This message is sent when a user, previously commented by the user, gets a new comment.
* <cite>user_evaluation_owner</cite> - This message is sent when the user itself get the comment.</p>
<p>Messages sent by modules:
* <cite>dlr_new_request</cite> - Notification for project admins about a new download request. - [‘username’, ‘requestid’, ‘request_message’]
* <cite>dlr_request_registered</cite> - Notification for the user that his download request was registered.
* <cite>incomplete_list_processed</cite> -
* <cite>incomplete_list_unprocessed</cite> -</p>
</div>
</div>
<div class="section" id="server-info">
<h2>Server info<a class="headerlink" href="#server-info" title="Permalink to this headline">¶</a></h2>
<p>There is a lot of basic information available about the project, such as the application version number, storage usage, system load and memory usage, and a link to the Supervisor project administration interface.</p>
</div>
<div class="section" id="server-logs">
<h2>Server logs<a class="headerlink" href="#server-logs" title="Permalink to this headline">¶</a></h2>
<p>Read logs of mapserver or web app logger.</p>
</div>
<div class="section" id="id2">
<h2>Members<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>List of members registered in the project. You can change your user status here. These are Normal, Operator, Suspended. Suspended users do not have access to anything in the project, almost equivalent to deleting a profile.
Operators have access to all features and data. The database founder does not have to be an operator to have access to everything. Normal users will by default have access to data upload and data query options according to the project’s privilege setting. This default can be modified by creating groups and assigning different permissions to groups. See <span class="xref std std-ref">Groups</span> and <span class="xref std std-ref">Administrative access</span>.</p>
<p>Members’ group assignments can also be modified here, but a more convenient interface is Group Manager.</p>
<p>The member name is a reference in this interface. Following this link will take you to the user’s profile page. With administrative privileges, a tree-user-secret icon (<a class="reference external" href="https://forkaweso.me/Fork-Awesome/icon/user-secret/">https://forkaweso.me/Fork-Awesome/icon/user-secret/</a>) will appear in the tab title bar - top right. Clicking on this will take you to another user’s profile using your own user login details.</p>
</div>
<div class="section" id="background-jobs">
<h2>Background jobs<a class="headerlink" href="#background-jobs" title="Permalink to this headline">¶</a></h2>
<p>[web] -&gt; [profile] -&gt; [project administration] -&gt; [background processes]</p>
<p>OBM can perform tasks in the background. You can download background process scripts from the git repo available from the page and modify them or write a completely new one based on the template script. The shell processes have a run and a lib file. The scheduler calls our run file which, in the case of a standard php job, executes the tasks in the lib file.</p>
<p>The scheduler is cron-like, you have to fill in a minute - hour - day fields, which can be * in both cases, i.e. every minute, hour, day has a value. The job will not run if not enabled. You can test it without enabling [run]. With [results] you can see the last results of the job.</p>
<p>In order to run the scheduler, the host must also have a scheduler cron entry for each project job running script. This can be configured by the server administrator. E.g:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">*/5</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">/usr/local/bin/docker-compose</span> <span class="pre">-f</span> <span class="pre">/srv/docker/openbiomaps/docker-compose.yml</span> <span class="pre">exec</span> <span class="pre">-u</span> <span class="pre">www-data</span> <span class="pre">-T</span> <span class="pre">app</span> <span class="pre">php</span> <span class="pre">/var/www/html/biomaps/root-site/projects/myproject/jobs.php</span>
<span class="pre">`</span></code></p>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright OpenBioMaps Consortium 2015 - 2020.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.0+.
        </div>
    </div>  

</body>
</html>