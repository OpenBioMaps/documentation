

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server configuration &mdash; openbiomaps 4.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <link rel="search" title="Search" href="search.html" /> 

</head>

<body>
    <table style='background-color:#eeeeee;padding:10px;margin:0;width:100%'>
    <tr>
        <td rowspan='2' style='vertical-align:bottom'>
            <a href='https://openbiomaps.org' style='border:0'><img src="_images/OpenBioMaps_small.png"></a>
        </td>
        <td style='vertical-align:top;text-align:right'>
            <a href='https://openbiomaps.org' target='_blank'>Home</a> | 
            <a href='https://openbiomaps.org/community/' target='_blank'>Community</a> | 
            <a href='faq.html'>FAQ</a> | 
            <a href='https://gitlab.com/groups/openbiomaps/-/issues'>Issues</a> | 
            <a href='https://twitter.com/OpenBioMaps' target='_blank'>Twitter</a> | 
            <a href="https://github.com/OpenBioMaps/documentation/tree/master/official_docs" class="fa fa-github">Edit documents</a>
        </td>
    </tr>
    <tr>
         <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
          <a href="https://openbiomaps.org/documents/en/"><img src="_static/flagicons/en.png" alt="en" title="in English" border="0" /></a>
          <a href="https://openbiomaps.org/documents/hu/"><img src="_static/flagicons/hu.png" alt="hu" title="Magyarul" border="0" /></a>
         </td>
    </tr>
    </table>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="index.html">Docs</a></li>
        
      <li>Server configuration</li>
    
    
      <li class="breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#openbiomaps-overview">OpenBioMaps overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#getting-started">Getting started</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#upload-data">Upload data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#query-data">Query Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#share-data">Share Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#new-project">New project</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#data-access-using-qgis">Data access using QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#new-server-installation">New server Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using_web_application.html">Using the web application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html">User interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html">Profile page</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_data.html">Upload data workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_access.html">Data access</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html">Administrative pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#api-handlers">API handlers:</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#oauth">OAUTH</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#pds">PDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#web-api">WEB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#form-data-get-form-data-results-explanations">Form Data (get_form_data results) explanations</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#training-explanations-and-examples">Training explanations and examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#general-api-answers">General API answers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server_install.html">Install new OBM Server guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#new-obm-server-installation-using-docker">New OBM server installation using Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#common-errors-and-solutions-after-new-installations-or-updates">Common errors and solutions after new installations or updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#server-configuration">Server configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="server_install.html#local-variables-for-a-project">Local variables for a project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pwa.html">PWA application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pwa.html#what-is-the-obm-pwa-application">What is the OBM PWA application?</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwa.html#configuration-settings-for-pwa-application">Configuration settings for PWA application</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwa.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mobile_application.html">Mobile application documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mobile_application.html#how-the-mobile-application-works">How the mobile application works?</a></li>
<li class="toctree-l2"><a class="reference internal" href="mobile_application.html#mobile-application-settings-on-the-server">Mobile application settings on the server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer_hints.html">Developer hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-openbiomaps">What is OpenBioMaps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-openbiomaps-consortium">What is OpenBioMaps consortium?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-contact-the-consortium">How can I contact the consortium?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-create-found-a-new-database-project">How can I create/found a new database-project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-upload-data">How can I upload data?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-access-data">How can I access data?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-sign-up-for-an-openbiomaps-project">How can I sign up for an OpenBioMaps project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-there-a-programmable-interface-for-developers">Is there a programmable interface for developers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-language-support-is-available">What language support is available?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-contribute-to-openbiomaps">How can I contribute to OpenBioMaps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#shoud-i-pay-for-anything">Shoud I pay for anything?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-and-where-the-openbiomaps-stores-the-data">How and where the OpenBioMaps stores the data?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-there-any-backup-solution">Is there any backup solution?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-lost-my-password-how-can-i-get-a-new">I lost my password, how can I get a new?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#pink-squares-appear-on-the-map-page">Pink squares appear on the map page</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-the-rum">What is the RUM?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-it-possible-to-assign-a-doi-to-databases">Is it possible to assign a DOI to databases?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#where-can-i-find-the-list-of-the-existing-openbiomaps-servers">Where can I find the list of the existing OpenBioMaps servers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-does-the-openbiomaps-mobile-app-work">How does the OpenBioMaps mobile app work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#where-can-i-found-the-openbiomaps-r-package">Where can I found the OpenBioMaps R package?</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="server-configuration">
<h1>Server configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">¶</a></h1>
<p>The system settings for OpenBioMaps are located in</p>
<div class="section" id="system-vars">
<h2>system_vars<a class="headerlink" href="#system-vars" title="Permalink to this headline">¶</a></h2>
<p><cite>/etc/openbiomaps/system_vars.php.inc</cite></p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">define(&quot;OB_DOMAIN&quot;,&quot;.../biomaps&quot;);</span>

<span class="x">define(&quot;OB_SYSDIR&quot;,&quot;/mnt/data/&quot;);</span>

<span class="x">define(&quot;OB_TMP&quot;,&quot;/mnt/data/tmp/&quot;);</span>

<span class="x">define(&quot;OB_ROOT&quot;,&quot;/var/www/html/biomaps/&quot;);</span>

<span class="x">define(&quot;OB_ROOT_SITE&quot;,&quot;/var/www/html/biomaps/root-site/&quot;);</span>

<span class="x">define(&quot;POSTGRES_PORT&quot;,&quot;5432&quot;);</span>

<span class="x">define(&quot;GISDB_HOST&quot;,&#39;localhost&#39;);     // for creating new project</span>

<span class="x">define(&quot;MAPSERVER_HOST&quot;,&#39;localhost&#39;); // for creating new project</span>

<span class="x">define(&quot;OB_RESOURCES&quot;,&quot;/var/www/html/biomaps/resources/&quot;);</span>

<span class="x">define(&#39;biomapsdb_user&#39;,&#39;...&#39;);</span>

<span class="x">define(&#39;biomapsdb_pass&#39;,&#39;...&#39;);</span>

<span class="x">define(&#39;biomapsdb_name&#39;,&#39;...&#39;);</span>

<span class="x">define(&#39;biomapsdb_host&#39;,&#39;localhost&#39;);</span>

<span class="x">// Postgis version - not necessary to set, it only has historical value</span>
<span class="x">define(&#39;POSTGIS_V&#39;,&#39;2.1&#39;);</span>

<span class="x">// Default sendmail opetion, can be override in project level in local_vars.php.inc</span>
<span class="x">define(&#39;SENDMAIL&#39;,&#39;smtp&#39;); # sendmail | smtp</span>

<span class="x">// memcache tpye - choose this</span>
<span class="x">define(&#39;CACHE&#39;,&#39;memcache&#39;);</span>

<span class="x">// R-Shiny Server ports, for the projects where R shiny server should be enabled</span>
<span class="x">define(&#39;RSERVER_PORT_someproject&#39;,7982);</span>

<span class="x">// Supported languages</span>
<span class="x">define(&#39;LANGUAGES&#39;,&#39;en,hu,ro&#39;);</span>

<span class="x">// bug report system can be activated by put AUTO_BUGREPORT_ADDRESS constant</span>
<span class="x">// ask the issue-key from the gitlab-repo mainteners</span>
<span class="x">define(&#39;AUTO_BUGREPORT_ADDRESS&#39;,&#39;incoming+openbiomaps...&#39;);</span>
</pre></div>
</div>
</div>
<div class="section" id="apache-server">
<h2>apache server<a class="headerlink" href="#apache-server" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>cgi-bin settings</p></li>
</ul>
</div>
<div class="section" id="mapserver">
<h2>mapserver<a class="headerlink" href="#mapserver" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>fastcgi settings</p></li>
<li><p>mapcache settings</p></li>
</ul>
</div>
<div class="section" id="php">
<h2>PHP<a class="headerlink" href="#php" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>memcache settings</p></li>
</ul>
</div>
<div class="section" id="cron">
<h2>cron<a class="headerlink" href="#cron" title="Permalink to this headline">¶</a></h2>
<p>There are some recommended cron jobs to set up (examples):</p>
<ul>
<li><p>docker update</p>
<p><a class="reference external" href="https://github.com/OpenBioMaps/scripts/tree/master/docker-auto-update">https://github.com/OpenBioMaps/scripts/tree/master/docker-auto-update</a></p>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># m h  dom mon dow   command</span>
<span class="m">0</span> <span class="m">4</span>,16 * * * /srv/docker/openbiomaps/auto_update.sh &gt; /srv/docker/openbiomaps/system_update_job.log
</pre></div>
</div>
<ul>
<li><p>archiver</p>
<p>using the <a class="reference external" href="https://github.com/OpenBioMaps/scripts/blob/master/obm_archive.sh">https://github.com/OpenBioMaps/scripts/blob/master/obm_archive.sh</a> script (with .archive_list.txt and obm_archive_settings.sh)</p>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># m h  dom mon dow   command</span>
<span class="m">0</span> <span class="m">2</span> * * *  /path_to/obm_archive.sh normal
<span class="m">15</span> <span class="m">2</span> * * * /path_to/obm_archive.sh system
<span class="m">15</span> <span class="m">3</span> <span class="m">1</span> * * /path_to/obm_archive.sh full
<span class="m">0</span> <span class="m">5</span> * * *  /path_to/obm_archive.sh clean
<span class="c1"># remote servers</span>
<span class="m">0</span> <span class="m">4</span> * * *  /path_to/obm_archive.sh sync remote_user@remote-server.com /remote_path_to_archives

On Docker use the instructions at the end of obm_archive_settings.sh
</pre></div>
</div>
<ul class="simple">
<li><p>jobs runner</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># m h  dom mon dow   command</span>
*/5 * * * * /path_to/docker-compose -f /srv/docker/openbiomaps/docker-compose.yml <span class="nb">exec</span> -u www-data -T app php /var/www/html/biomaps/root-site/projects/PROJECTTABLE/jobs.php
</pre></div>
</div>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright OpenBioMaps Consortium 2015 - 2020.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.0+.
        </div>
    </div>  

</body>
</html>