
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>User interfaces &#8212; openbiomaps 3.2 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Profile page" href="profile.html" />
    <link rel="prev" title="Tutorials" href="tutorials.html" /> 
  </head><body>
    <table style='background-color:#eeeeee;padding:10px;margin:0;width:100%'>
    <tr>
        <td rowspan='2' style='vertical-align:bottom'>
            <a href='http://openbiomaps.org' style='border:0'><img src="_images/OpenBioMaps.png"></a>
        </td>
        <td style='vertical-align:top;text-align:right'>
            <a href='http://openbiomaps.org' target='_blank'>Home</a> | 
            <a href='http://openbiomaps.org/community/' target='_blank'>Community</a> | 
            <a href='faq.html'>FAQ</a> | 
            <a href='https://gitlab.com/groups/openbiomaps/-/issues'>Issues</a> | 
            <a href='https://twitter.com/OpenBioMaps' target='_blank'>Twitter</a> | 
            <a href="https://github.com/OpenBioMaps/documentation/tree/master/official_docs" class="fa fa-github">Edit documents</a>
        </td>
    </tr>
    <tr>
         <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
          <a href="http://openbiomaps.org/documents/en/"><img src="_static/flagicons/en.png" alt="en" title="in English" border="0" /></a>
          <a href="http://openbiomaps.org/documents/hu/"><img src="_static/flagicons/hu.png" alt="hu" title="Magyarul" border="0" /></a>
         </td>
    </tr>
    </table>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="profile.html" title="Profile page"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="tutorials.html" title="Tutorials"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">openbiomaps 3.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-interfaces">
<span id="user-interface"></span><h1>User interfaces<a class="headerlink" href="#user-interfaces" title="Permalink to this headline">¶</a></h1>
<p><strong>Contents:</strong></p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="profile.html">Profile page</a><ul>
<li class="toctree-l2"><a class="reference internal" href="profile.html#user-data">User data</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#orcid-profile">ORCID profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#user-information">User information</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#other-databases">Other databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#activity">Activity</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#interrupted-imports">Interrupted imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#stored-queries">Stored queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#saved-results">Saved results</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#api-keys">Api keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#manage-custom-geometries">Manage custom geometries</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#create-postgresql-user">Create PostgreSQL user</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#manage-downloads">Manage downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html#opinions">Opinions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invitations.html">Invitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_pages.html">Administrative pages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#administrative-access">Administrative access</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#database-columns">Database columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#groups">Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#upload-forms">Upload forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#species-names">Species names</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#access">Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#translations">Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#interrupted-uploads">Interrupted uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#file-manager">File manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#sql-query-settings">SQL query settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#web-map-layers">Web Map Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#members">Members</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#mapserver-settings">Mapserver settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_pages.html#server-logs">Server logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules.html#additional-columns">additional_columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#allowed-columns">allowed_columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#bold-yellow">bold_yellow</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#box-load-selection">box_load_selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#box-load-coord">box_load_coord</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#box-load-last-data">box_load_last_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#box-custom">box_custom</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#photos">photos</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#read-table">read_table</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-summary">results_summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-table">results_table</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-aslist">results_asList</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-asgpx">results_asGPX</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-ascsv">results_asCSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-asjson">results_asJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-asshp">results_asSHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-askml">results_asKML</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-buttons">results_buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#results-asstable">results_asStable</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#specieslist">specieslist</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#text-filter">text_filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#text-filter2">text_filter2</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#transform-data">transform_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#extra-params">extra_params</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#join-tables">join_tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#shared-geom">shared_geom</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#snap-to-grid">snap_to_grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#restricted-data">restricted_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#identify-point">identify_point</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#notify">notify</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#custom-data-check">custom_data_check</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#custom-filetype">custom_filetype</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#create-pg-user">create_pg_user</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#grid-view">grid_view</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#massive-edit">massive_edit</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#download-restricted">download_restricted</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#job-manager-validation">job_manager (validation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#list-manager">list_manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#move-project">move_project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upload_forms.html">Upload form management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="upload_forms.html#list-of-available-forms">List of available forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_forms.html#form-header-definition">Form header definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_forms.html#form-column-definitions">Form column definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="upload_forms.html#relations-pseudolanguage-definition">Relations pseudolanguage definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_query_interface.html">Spatial queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_query_interface.html#map-query">map query</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_query_interface.html#text-queries">Text queries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_query_interface.html#text-query">text query</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_query_interface.html#save-query">save query</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_query_interface.html#share-query">share query</a></li>
</ul>
</div>
<div class="section" id="log-in">
<h2>Log in<a class="headerlink" href="#log-in" title="Permalink to this headline">¶</a></h2>
<p>This button moves you to the “sign in” surface. If you already signed user you can use your own account. If not, you can ask invitation across the “registration” button.</p>
<p>Registration</p>
<p>Lost password</p>
</div>
<div class="section" id="loged-in-surface">
<h2>Loged-in surface<a class="headerlink" href="#loged-in-surface" title="Permalink to this headline">¶</a></h2>
<p>After login you will see your profile. See details about functions and features in the following link: <a class="reference internal" href="profile.html#profile"><span class="std std-ref">Profile page</span></a></p>
<p>That surface is divided to three main part: Main headline, sub-headline and working surface (see in Fig 1.).</p>
<div class="figure align-center" id="id1">
<img alt="_images/img_7.png" src="_images/img_7.png" />
<p class="caption"><span class="caption-text">Fig 1. The loged-in surface.</span></p>
</div>
<p>You can see in the sub-headline gear-wheels, if you click on them several button will appear between the main- and sub-headline: Profile, Invites, Project administration, Messages, Founding new project (see in Fig 2.).</p>
<div class="figure align-center" id="id2">
<img alt="images/img_8.png" src="images/img_8.png" />
<p class="caption"><span class="caption-text">Fig 2. The loged-in surface after you clicked on the gear-wheels.</span></p>
</div>
<div class="section" id="profile-tab">
<h3>Profile tab<a class="headerlink" href="#profile-tab" title="Permalink to this headline">¶</a></h3>
<p>See: <a class="reference internal" href="profile.html#profile"><span class="std std-ref">Profile page</span></a></p>
</div>
<div class="section" id="invites-tab">
<h3>Invites tab<a class="headerlink" href="#invites-tab" title="Permalink to this headline">¶</a></h3>
<p>See: <a class="reference internal" href="invitations.html#invitations"><span class="std std-ref">Invitations</span></a></p>
</div>
<div class="section" id="project-administration-pages">
<h3>Project administration pages<a class="headerlink" href="#project-administration-pages" title="Permalink to this headline">¶</a></h3>
<p>See: <a class="reference internal" href="admin_pages.html#project-administration"><span class="std std-ref">Administrative pages</span></a></p>
</div>
<div class="section" id="messages-tab">
<h3>Messages tab<a class="headerlink" href="#messages-tab" title="Permalink to this headline">¶</a></h3>
<div class="section" id="message-types">
<h4>Message types<a class="headerlink" href="#message-types" title="Permalink to this headline">¶</a></h4>
<p>On this page you can read and write internal messages. Our message system can handle four main message types :</p>
<ul class="simple">
<li>System messages - these are messages sent to individual users from the project or from the server. This type of message can be sent for example by the background validation processes</li>
<li>Personal messages - these are messages sent from users to users. The message composer is accessible by pressing the Compose message button on the bottom left part of the messages page.</li>
<li>Comment notifications - are messages which you receive if one of your data record, uploading or yourself got a comment.</li>
<li>News stream - contains an entry for each upload, if a new project is created, if someone shares a polygon or on comments</li>
</ul>
<p>Every logged in user can send personal messages to another user.</p>
<p>Project administrators can send messages to users and groups. They can also send an email alert about this message.</p>
</div>
<div class="section" id="user-settings">
<h4>User settings<a class="headerlink" href="#user-settings" title="Permalink to this headline">¶</a></h4>
<p>Users can tune their e-mail alert preferences for the different message types on the profile page.</p>
</div>
<div class="section" id="plans">
<h4>Plans<a class="headerlink" href="#plans" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>email alert daily diegest</li>
<li>replay to messages</li>
<li>replay to comments</li>
</ul>
</div>
</div>
<div class="section" id="founding-new-a-project-tab">
<h3>Founding new a project tab<a class="headerlink" href="#founding-new-a-project-tab" title="Permalink to this headline">¶</a></h3>
<p><em>Section author: Róbert Veres (2016-12-19)</em></p>
<div class="section" id="introduction">
<h4>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<p>Most of the steps will be illustrated with screenshots, and I will also include a few code lines which I used in SQL and the Debian terminal.
Even tough, in-depth SQL programming knowledge isn’t required to follow the steps of founding a database, some basic knowledge is recommended for a better understanding of the OBM system.
The operating system that I’m using, is Ubuntu (Linux), but you should be able to follow along.
If you have any questions regarding the discussed topics, or things I didn’t covered, you can ask them on the official OBM forums or on one of the developers [mailing lists](<a class="reference external" href="http://openbiomaps.org/community/?lang=en">http://openbiomaps.org/community/?lang=en</a>) (if you are new to OBM, the Biomaps mailing list is probably the best option).</p>
<p>There will be several updates to this manual, and new topics will be added, based on request or big system changes/updates. These changes will be listed in the last chapter of the manual.</p>
</div>
<div class="section" id="creating-a-database">
<h4>Creating a database<a class="headerlink" href="#creating-a-database" title="Permalink to this headline">¶</a></h4>
<p>In this chapter I will focus on walking you trough the steps required, to found your own database.</p>
<p>To be able to create a database, first you need an invitation, from someone who is already an OBM user. If you don’t have such an acquaintance, you can simply request one using the mailing list’s mentioned in the previous chapter. If you receive an invitation, you will be able to register, and become an OBM user.</p>
<p>If you have done the previous step, you will be able to access your profile, after you login (Fig.3).</p>
<div class="figure align-center" id="id3">
<img alt="_images/img_1.png" src="_images/img_1.png" />
<p class="caption"><span class="caption-text">Fig 3.</span></p>
</div>
<p>Here, on the <strong>Founding new project</strong> tab, you will find the creation form which you will have to fill out. If for you, the text doesn’t appear in english, don’t panic. At the bottom of the page, you can choose the language in which the text appears. Each field has a tooltip, in which essential information is displayed about the respective field. E.g in the first field, you can see that is is obligatory to compleat, it cannot contain whitespaces, and can contain lowercase letters only (it can however contain underscores). You have a full list of descriptions regarding the fields, at the bottom of the page.</p>
<p>Please note, that the <em>‘short description’</em> will be the public headline of the database, while the <em>‘name of the database’</em> is a definition that the code uses and it’s not public. It is good practice, to add a detailed <em>‘Long description’</em>, when completing the <em>‘data fields’</em> section (this is not obligatory by default). Another thing to note is, that when choosing the <em>‘type’</em> in the <em>‘data fields’</em> section, the difference between numeric and integer type is, that the numeric type can be a decimal number while the integer must be a whole number; and the difference between text and string type is, that the text can have an unlimited number of characters while the string can have a maximum of 255 characters.</p>
<p>At this point, if you configured everything correctly, upon clicking on the create button, a window should pop up with a success message and a log of all the created files. You should read the log, as it contains instructions on what to do next with your project. The project will now be available at <em>‘openbiomaps.org/biomaps/projects/YOUR_NEW_DATABASE’</em>.</p>
</div>
<div class="section" id="configuring-your-database">
<h4>Configuring your database<a class="headerlink" href="#configuring-your-database" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>When you found a new project, the system create a skeleton, which has three parts:</dt>
<dd><ul class="first last simple">
<li>A directory tree in the file system (/var/www/html/biomaps/projects/YOUR_NEW_DATABASE), which is containing symlinks to the program files and local setting files (local_vars.php.inc .htaccess)</li>
<li>A postgresql user (the postgresql, is the type of SQL our system uses) for the new project that has authorisation to access all necessary tables (the ones mentioned below, and other temporary ones). These information’s (the <em>‘PostgreSQL user’</em> and <em>‘PostgreSQL password’</em>) are generated automatically and you should save them, because you will need them to access your data tables for administration purposes. Fig.2</li>
<li>3 tables within the <strong>gisdata</strong> database (this is where all the data tables are stored):
* YOUR_NEW_DATABASE (by default this will contain all the data that you will store in your project)
* YOUR_NEW_DATABASE_history (as the name implies, this will contain a list of changes that have occurred in your YOUR_NEW_DATABASE table)
* YOUR_NEW_DATABASE_taxon (this table will be generated automatically; i will speak about this table in more detail later)
* You can access all your data tables at <a class="reference external" href="http://openbiomaps.org/phppgadmin/">http://openbiomaps.org/phppgadmin/</a> While you can see the data tables of other OBM users, you can only access your own. Fig.3 - Fig.4. Note, that you are not limited to these 3 tables, and can create new ones. It is good practice to follow the naming pattern. Accordingly the new table should look like <em>‘YOUR_NEW_DATABASE_new_table_name’</em>.</li>
</ul>
</dd>
</dl>
<div class="figure align-center" id="id4">
<img alt="_images/img_2.png" src="_images/img_2.png" />
<p class="caption"><span class="caption-text">Fig 2.</span></p>
</div>
<div class="figure align-center" id="id5">
<img alt="_images/img_3.png" src="_images/img_3.png" />
<p class="caption"><span class="caption-text">Fig 3.</span></p>
</div>
<div class="figure align-center" id="id6">
<img alt="_images/img_4.png" src="_images/img_4.png" />
<p class="caption"><span class="caption-text">Fig 4.</span></p>
</div>
<p>At this point you have a valid project, but this is not sufficient to start working with the new database. Additional settings have to be made in order to connect the SQL tables to the <strong>Mapserver</strong>, and let the <strong>web application</strong> use both your tables and the Mapserver. The configurations should be made in the following order: <strong>Database -&gt; SQL queries -&gt; Openlayers -&gt; Mapserver</strong>. All these changes must be done in the online interface of your project (Profile -&gt; <strong>Project administration</strong> tab).</p>
</div>
<div class="section" id="database">
<h4>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h4>
<p>First, you must “pick-up” your database columns (Profile -&gt; Project administration -&gt; <strong>Database columns</strong> tab) The OBM does not handle this step automatically. The chosen columns have to be marked for identity and type of use. They have to be provided with public names (these can be the same as the database column names or different: e.g <em>‘dummy_date’</em> -&gt;  <em>‘Dummy date’</em>) and must be marked as <em>‘special column’</em> or <em>‘common data’</em>. You cannot change the public names of the automatically generated columns, like <em>‘obm_geometry’</em> or <em>‘obm_id’</em>. The <em>‘special columns’</em> are the special column types, that project users use a lot, and you will have a few extra options for the columns marked with thees types. Some of the types are: <strong>date</strong> type, different <strong>geometry</strong> types (which handles one ore more sets of coordinates), <strong>species</strong> type (you will want to mark the column containing species names with this one, because it will register the names, and store them in the YOUR_NEW_DATABASE_taxon table, which we will set up a little later. If this is set up correctly, the map search engine will offer option from the table, as you start typing in search fields), the <strong>number of individuals</strong> and <strong>citing person</strong> types. Note, that you can have only one of each of the special column type (except the <em>‘date’</em> and <em>‘cite person’</em> types), and the rest of the columns should be set to <em>‘common data’</em>. Every column that you wish to use, must be “picked-up”, because the system will not have access to the one’s that aren’t. If you add new databases later, or expends the existing ones with additional columns, these have to be “picked up” again the same way. One of the columns, that the system generates automatically will appear here. This is the obm_id column. Usually you don’t want this column to be public, and it is very important to set this column’s type to <em>‘special: id’</em>. Only after setting the type, will the web page be able to work with the data from your data tables. Fig.5</p>
<div class="figure align-center" id="id7">
<img alt="_images/img_5.png" src="_images/img_5.png" />
<p class="caption"><span class="caption-text">Fig 5.</span></p>
</div>
</div>
<div class="section" id="sql-queries">
<h4>SQL queries<a class="headerlink" href="#sql-queries" title="Permalink to this headline">¶</a></h4>
<p>Second, a number of SQL queries need to be made for the Mapserver and web application (Profile -&gt; Project administration -&gt; <strong>SQL query settings</strong> tab). In most of the cases, if you have simple data structure, only one data layer (simple collection data) and one user access level (no login restriction) in your new project, you will need to set up one query for the map visualisation (<em>‘layer_data_points’</em>) and another for the query data(<em>‘layer_query_points’</em>); in total 2 queries for the 2 layers, which are both public. <strong>“Base type”</strong> queries will only be used by the Mapserver but <strong>“query type”</strong> queries will be used by both the Mapserver and the web application. These queries can be accessed by their names (the defaults, these are <strong>“layer_data”</strong> and <strong>“layer_query”</strong>).</p>
<p>In my example, I will have user restriction levels (you will have access to more detailed data if you are logged in), and so I will need a total of 4 queries, 2 for the Mapserver (one public, and one private) and 2 for the web applications (one public, and one private). Note, that when configuring the query layer, you will need to specify the type of geometry that you are using. In my case the geometry type is point, and I will name my layers <em>‘layer_data_points’</em> and <em>‘layer_query_points’</em>. If you have a simple data structure, you can go ahead, and use the queries automatically generated by the system. In case you need some more complex queries, you can always ask for help on the forums, or official mailing lists.
Note, that the system can only register the changes made in one line at a time, so each change that you make, must be saved independently by clicking the <strong>modify it</strong> button. Also, don’t worry about the red warning text; we will fix it in the next step.</p>
<p>Mi a web map layer? Meg kiegesziteni plusz informacioval.</p>
<p>Fig 6.</p>
<div class="figure align-center" id="id8">
<img alt="_images/img_6.png" src="_images/img_6.png" />
<p class="caption"><span class="caption-text">Fig 6.</span></p>
</div>
</div>
<div class="section" id="openlayers">
<h4>OpenLayers<a class="headerlink" href="#openlayers" title="Permalink to this headline">¶</a></h4>
<p>In the next step, the access for Openlayers to Mapserver layers must be set up, through the names defined in the previous step (in my case these were <em>‘layer_data_points’</em> and <em>‘layer_query_points’</em>). This can be found under Profile -&gt; Project administration -&gt; <strong>Web map layers</strong> tab. This step is easy, because if we set up everything correctly int he previous step, the system dose everything for us. Also, because we already defined the names of the layers, we can just click the add button and everything is done. Note, that because we have 2 layers, we need to add both of them to the definition. Upon adding the firs layer, the second one is also generated automatically. Upon finishing this step, you return to the previous tab, you can see that the red warning message is gone. Fig.7</p>
</div>
<div class="section" id="mapserver">
<h4>Mapserver<a class="headerlink" href="#mapserver" title="Permalink to this headline">¶</a></h4>
<p>In the final step, the mapfile (private) has to be checked, and &#64;&#64;extent&#64;&#64; needs to be replaced with the corresponding real values (Profile -&gt; Project administration -&gt; <strong>Mapserver settings</strong> tab). For More information about the EXTENT see here: <a class="reference external" href="http://mapserver.org/mapfile/map.html">http://mapserver.org/mapfile/map.html</a> . Shortly…, ide kel egy rovid leiras.</p>
<p>E.g.: Romania’s box is: 20.2155838012695 43.5630531311035 29.9736919403076 48.400691986084</p>
<p>Fig.8</p>
</div>
<div class="section" id="fine-tunning-steps-and-bug-trackings">
<h4>Fine tunning steps and bug trackings<a class="headerlink" href="#fine-tunning-steps-and-bug-trackings" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Check your settings -&gt; if the map is not pink that is a good sign.</li>
<li>Create an upload form &amp; upload some data.</li>
<li>Go to the phppgadmin interface gisdata/YOUR_NEW_DATABASE and use the analyse function of postgresql</li>
<li>Go back the mapserver settings to see your calculated bounding box of your data. This can be copied/pasted as EXTENT …..</li>
<li>Query the records &amp; check the results</li>
</ul>
<p>Any errors made in the steps above will cause pink squares on the map window.</p>
<p>Reading the web server, syslog and the mapserver log will help resolve these problems:
tail -f /var/log/apache2/error.log
tail -f /var/log/syslog OR /var/log/openbiomaps.log
tail -f /tmp/YOUR_NEW_DATABASE_private_ms_error.txt)</p>
<p>At the bottom of the ‘Administrative menu’ in the logs page you can read the openbiomaps.log and the mapserver log files.</p>
</div>
</div>
</div>
<div class="section" id="map-page-interface">
<h2>Map page interface<a class="headerlink" href="#map-page-interface" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="upload-data-interface">
<h2>Upload data interface<a class="headerlink" href="#upload-data-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="file-upload">
<h3>File upload<a class="headerlink" href="#file-upload" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="web-upload">
<h3>Web upload<a class="headerlink" href="#web-upload" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="saved-uploads">
<h3>Saved uploads<a class="headerlink" href="#saved-uploads" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User interfaces</a><ul>
<li><a class="reference internal" href="#log-in">Log in</a></li>
<li><a class="reference internal" href="#loged-in-surface">Loged-in surface</a><ul>
<li><a class="reference internal" href="#profile-tab">Profile tab</a></li>
<li><a class="reference internal" href="#invites-tab">Invites tab</a></li>
<li><a class="reference internal" href="#project-administration-pages">Project administration pages</a></li>
<li><a class="reference internal" href="#messages-tab">Messages tab</a><ul>
<li><a class="reference internal" href="#message-types">Message types</a></li>
<li><a class="reference internal" href="#user-settings">User settings</a></li>
<li><a class="reference internal" href="#plans">Plans</a></li>
</ul>
</li>
<li><a class="reference internal" href="#founding-new-a-project-tab">Founding new a project tab</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#creating-a-database">Creating a database</a></li>
<li><a class="reference internal" href="#configuring-your-database">Configuring your database</a></li>
<li><a class="reference internal" href="#database">Database</a></li>
<li><a class="reference internal" href="#sql-queries">SQL queries</a></li>
<li><a class="reference internal" href="#openlayers">OpenLayers</a></li>
<li><a class="reference internal" href="#mapserver">Mapserver</a></li>
<li><a class="reference internal" href="#fine-tunning-steps-and-bug-trackings">Fine tunning steps and bug trackings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#map-page-interface">Map page interface</a></li>
<li><a class="reference internal" href="#upload-data-interface">Upload data interface</a><ul>
<li><a class="reference internal" href="#file-upload">File upload</a></li>
<li><a class="reference internal" href="#web-upload">Web upload</a></li>
<li><a class="reference internal" href="#saved-uploads">Saved uploads</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorials.html"
                        title="previous chapter">Tutorials</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="profile.html"
                        title="next chapter">Profile page</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="profile.html" title="Profile page"
             >next</a></li>
        <li class="right" >
          <a href="tutorials.html" title="Tutorials"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">openbiomaps 3.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright OpenBioMaps Consortium 2015 - 2020.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>